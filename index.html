<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Half Marathon Training Plan</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background-color: #f8fafc;
    margin: 40px;
  }
  .week {
    margin-bottom: 20px;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    background: white;
    overflow: hidden;
  }
  summary {
    font-size: 1.4em;
    font-weight: 600;
    padding: 12px 20px;
    background: #2563eb;
    color: white;
    cursor: pointer;
  }
  details[open] summary {
    background: #1e40af;
  }
  table {
    width: 100%;
    border-collapse: collapse;
  }
  th, td {
    text-align: left;
    padding: 10px 20px;
  }
  th {
    background-color: #f1f5f9;
    font-weight: 600;
    border-bottom: 2px solid #e2e8f0;
  }
  tr:nth-child(even) {
    background-color: #f9fafb;
  }
  .day {
    font-weight: 600;
  }
  .done-col { width: 80px; text-align: center; }
  .done-row td { opacity: 0.6; text-decoration: line-through; }
</style>
  <meta name="theme-color" content="#2563eb" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
</head>
<body>
<h1>ğŸƒâ€â™‚ï¸ Half Marathon Training Plan</h1>
<button id="installBtn" style="display:none;margin:10px 0;padding:10px 14px;border:none;border-radius:10px;background:#10b981;color:white;font-weight:600;cursor:pointer">â• ×”×ª×§×Ÿ ×›××¤×œ×™×§×¦×™×”</button>
<p style="margin-top:6px;color:#475569;font-size:0.95em">×˜×™×¤: ×‘××™×™×¤×•×Ÿ ××¤×©×¨ ×’× ×œ×©×ª×£ â†’ "×”×•×¡×£ ×œ××¡×š ×”×‘×™×ª".</p>
<p>Click each week to expand and view the training days. You can type directly into the <b>Practice</b> and <b>Notes</b> cells.</p>

<!-- Week 17 -->
<div class="week">
  <details>
    <summary>Week 17</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>28/10/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>31/10/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 16 -->
<div class="week">
  <details>
    <summary>Week 16</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>04/11/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>07/11/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 15 -->
<div class="week">
  <details>
    <summary>Week 15</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>11/11/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>14/11/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 14 -->
<div class="week">
  <details>
    <summary>Week 14</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>18/11/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>21/11/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 13 -->
<div class="week">
  <details>
    <summary>Week 13</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>25/11/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>28/11/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 12 -->
<div class="week">
  <details>
    <summary>Week 12</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>02/12/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>05/12/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 11 -->
<div class="week">
  <details>
    <summary>Week 11</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>09/12/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>12/12/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 10 -->
<div class="week">
  <details>
    <summary>Week 10</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>16/12/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>19/12/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 9 -->
<div class="week">
  <details>
    <summary>Week 9</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>23/12/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>26/12/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 8 -->
<div class="week">
  <details>
    <summary>Week 8</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>30/12/25</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>02/01/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 7 -->
<div class="week">
  <details>
    <summary>Week 7</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>06/01/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>09/01/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 6 -->
<div class="week">
  <details>
    <summary>Week 6</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>13/01/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>16/01/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 5 -->
<div class="week">
  <details>
    <summary>Week 5</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>20/01/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>23/01/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 4 -->
<div class="week">
  <details>
    <summary>Week 4</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>27/01/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>30/01/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 3 -->
<div class="week">
  <details>
    <summary>Week 3</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>03/02/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>06/02/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 2 -->
<div class="week">
  <details>
    <summary>Week 2</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>10/02/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>13/02/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 1 -->
<div class="week">
  <details>
    <summary>Week 1</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>17/02/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>20/02/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<!-- Week 0 -->
<div class="week">
  <details open>
    <summary>Week 0 (Race Week)</summary>
    <table>
      <tr><th>Day</th><th>Date</th><th>Practice</th><th>Notes</th></tr>
      <tr><td class="day">Tuesday</td><td>24/02/26</td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
      <tr><td class="day">Friday</td><td>27/02/26</td><td contenteditable="true">Race Day ğŸ</td><td contenteditable="true"></td></tr>
    </table>
  </details>
</div>

<script>
// Add a "Done" checkbox column to every week table with localStorage persistence
(function(){
  function keyFor(day, dateStr){
    // Normalize key by removing spaces and uppercasing
    return (day + '-' + dateStr).replace(/ /g,'').toUpperCase();
  }
  function applyRowState(tr, checked){
    if(checked){ tr.classList.add('done-row'); }
    else { tr.classList.remove('done-row'); }
  }
  document.querySelectorAll('.week table').forEach(function(tbl){
    // Add header cell
    var header = tbl.querySelector('tr');
    if(header && header.querySelector('th')){
      var th = document.createElement('th');
      th.textContent = 'Done';
      th.className = 'done-col';
      header.appendChild(th);
    }
    // Add checkbox to each data row
    tbl.querySelectorAll('tr').forEach(function(tr, idx){
      if(idx === 0) return; // skip header
      var tds = tr.querySelectorAll('td');
      if(tds.length < 2) return;
      var day = (tds[0].textContent || '').trim();
      var dateStr = (tds[1].textContent || '').trim();
      var td = document.createElement('td');
      td.className = 'done-col';
      var cb = document.createElement('input');
      cb.type = 'checkbox';
      var k = keyFor(day, dateStr);
      cb.dataset.key = k;
      try { cb.checked = localStorage.getItem('hm_done_' + k) === '1'; } catch(e) {}
      applyRowState(tr, cb.checked);
      cb.addEventListener('change', function(){
        try {
          if(cb.checked){ localStorage.setItem('hm_done_' + k, '1'); }
          else { localStorage.removeItem('hm_done_' + k); }
        } catch(e) {}
        applyRowState(tr, cb.checked);
      });
      td.appendChild(cb);
      tr.appendChild(td);
    });
  });
})();
</script>

<script>
// --- Minimal PWA setup: dynamic manifest + inline service worker ---
(function(){
  // 1) Create a dynamic manifest.json (so we don't need a separate file)
  var manifest = {
    name: "Half Marathon Plan",
    short_name: "HM Plan",
    start_url: ".",
    scope: "/",
    display: "standalone",
    background_color: "#ffffff",
    theme_color: "#2563eb",
    icons: [
      // You can replace these with your own hosted icons later
      { src: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><rect width='64' height='64' fill='%232563eb'/><text x='50%' y='54%' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='28' fill='white'>HM</text></svg>", sizes: "64x64", type: "image/svg+xml", purpose: "any maskable" }
    ]
  };
  var blob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});
  var link = document.createElement('link');
  link.rel = 'manifest';
  link.href = URL.createObjectURL(blob);
  document.head.appendChild(link);

  // 2) Register a simple service worker using a Blob URL (no external file needed)
  if ('serviceWorker' in navigator) {
    var swCode = `
      const CACHE_NAME = 'hm-plan-v1';
      const OFFLINE_URLS = [ self.registration.scope ];
      self.addEventListener('install', (e)=>{
        e.waitUntil(caches.open(CACHE_NAME).then(c=>c.addAll(OFFLINE_URLS)));
        self.skipWaiting();
      });
      self.addEventListener('activate', (e)=>{ e.waitUntil(self.clients.claim()); });
      self.addEventListener('fetch', (e)=>{
        const req = e.request;
        e.respondWith(
          caches.match(req).then(res => res || fetch(req).then(resp => {
            const copy = resp.clone();
            caches.open(CACHE_NAME).then(c=>c.put(req, copy)).catch(()=>{});
            return resp;
          }).catch(()=> caches.match(self.registration.scope)))
        );
      });`;
    var swBlob = new Blob([swCode], {type: 'text/javascript'});
    var swUrl = URL.createObjectURL(swBlob);
    navigator.serviceWorker.register(swUrl);
  }

  // 3) Install button (Android/Chrome): capture beforeinstallprompt
  let deferredPrompt;
  const btn = document.getElementById('installBtn');
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    btn.style.display = 'inline-block';
  });
  btn && btn.addEventListener('click', async()=>{
    if(!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if(outcome === 'accepted') btn.textContent = '××•×ª×§×Ÿ âœ”';
    deferredPrompt = null;
  });
})();
</script>

</body>
</html>
